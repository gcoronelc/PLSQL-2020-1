CREATE OR REPLACE PROCEDURE SP_ACTUALIZARPAGO(
P_EP_IDEMPLEADO NUMBER,
P_AUMENTO NUMBER,
P_ERROR OUT NOCOPY  VARCHAR2
)
AS 
V_IDEMPLEADO NUMBER;
BEGIN
SELECT COUNT(EP_IDEMPLEADO)
INTO V_IDEMPLEADO 
FROM EMPLEADO 
WHERE EP_IDEMPLEADO = P_EP_IDEMPLEADO; 

IF (V_IDEMPLEADO = 0) THEN
      RAISE_APPLICATION_ERROR(-20001, 'EMPLEADO NO EXISTE');
    END IF;
    ---------------ACTUALIZA--------------------------------------
    UPDATE EMPLEADO
    SET  
     EP_SALARIO = EP_SALARIO+P_AUMENTO  
     WHERE EP_IDEMPLEADO  = P_EP_IDEMPLEADO; 
     P_ERROR := 'SALARIO ACTUALIZADO';
    COMMIT; 
   
   EXCEPTION
    WHEN OTHERS THEN     
      P_ERROR := TO_CHAR(sqlcode) || ' - ' || SQLERRM;     
END SP_ACTUALIZARPAGO; 